# Markdown Viewer & Translator

로컬 마크다운 파일을 브라우저에서 보여주고, 다양한 LLM API를 사용해 한국어로 번역할 수 있는 React 기반 애플리케이션입니다.

## 시작하기

### 설치

```bash
npm install
```

### 실행

```bash
npm run dev
```

브라우저에서 `http://localhost:5173`을 열면 앱이 실행됩니다.

### 환경 변수 설정 (선택사항)

`.env` 파일을 생성하여 API 키를 설정할 수 있습니다:

```env
VITE_OPENAI_API_KEY=your_openai_api_key
VITE_ANTHROPIC_API_KEY=your_anthropic_api_key
VITE_GEMINI_API_KEY=your_gemini_api_key
```

또는 앱 내 설정 메뉴에서 직접 입력할 수 있습니다.

## 주요 기능

### 1. 마크다운 뷰어

- **파일 탐색**: 폴더/파일 선택, 드래그 앤 드롭 지원
- **파일 트리**: 폴더 구조를 트리 형태로 표시, 접기/펼치기 가능
- **신택스 하이라이팅**: 코드 블록의 언어별 하이라이팅
- **Mermaid 다이어그램**: 마크다운 내 Mermaid 차트 렌더링
- **GitHub Flavored Markdown**: 테이블, 체크리스트 등 GFM 지원

### 2. 다국어 번역

#### 지원 LLM Provider
- **OpenAI**: GPT-4o, GPT-4o Mini, GPT-4 Turbo, GPT-3.5 Turbo
- **Anthropic**: Claude 3.5 Sonnet, Claude 3.5 Haiku, Claude 3 Opus/Sonnet/Haiku
- **Google Gemini**: Gemini 2.0 Flash, Gemini 1.5 Pro/Flash
- **커스텀 모델**: 직접 입력 옵션으로 최신 모델 사용 가능

#### 번역 기능
- **실시간 번역**: 현재 파일을 선택한 언어로 즉시 번역
- **일괄 번역**: 여러 파일을 동시에 번역 (최대 3개 동시 처리)
- **롤링 동시성**: 파일이 완료되는 즉시 다음 파일 번역 시작
- **번역 캐시**: IndexedDB에 번역 결과 저장, 재번역 방지
- **캐시 자동 로드**: 캐시된 번역이 있으면 자동으로 표시

### 3. 설정 관리

- **Provider 선택**: 설정 메뉴에서 원하는 LLM Provider 선택
- **모델 선택**: 각 Provider의 사용 가능한 모델 목록 표시
- **API 키 관리**:
  - 브라우저 localStorage에 안전하게 저장
  - 활성화된 키는 마스킹 표시 (예: `sk-••••1234`)
  - .env 파일의 키도 자동 인식

### 4. 사용자 인터페이스

#### 파일 목록
- **캐시 상태 표시**:
  - 💾 캐시된 파일 (번역 완료)
  - 📄 일반 파일
- **빈 폴더 숨기기**: 마크다운 파일이 없는 폴더 필터링
- **파일 새로고침**: 파일 목록 재로드

#### 뷰어 영역
- **경로 분리 표시**: 디렉토리와 파일명 구분 표시
- **번역 상태 배지**: 번역됨, 캐시됨 표시
- **원문/번역 전환**: 클릭으로 쉽게 전환

#### 플로팅 컨트롤
- **스크롤 시 표시**: 200px 이상 스크롤 시 우측에 나타남
- **최소화/확장**: 화면을 가리지 않도록 축소 가능
- **빠른 접근**: 번역, 전환, 맨 위로 버튼

#### 일괄 번역 모달
- **파일 선택**: 트리 뷰에서 번역할 파일 선택
- **실시간 상태**:
  - "번역중..." 표시 (진행 중)
  - "✓ 완료" 표시 (완료)
- **진행률 표시**: n/total 형태로 진행 상황 표시

## 사용 방법

### 파일 열기

1. **폴더 선택 (권장)**
   ```
   상단 "폴더 선택" → 폴더 선택 → 좌측 파일 트리에서 파일 클릭
   ```

2. **파일 선택**
   ```
   상단 "파일 선택" → 하나 이상의 .md 파일 선택
   ```

3. **드래그 앤 드롭**
   ```
   마크다운 파일을 브라우저 창으로 드래그
   ```

### 번역하기

1. **단일 파일 번역**
   ```
   파일 열기 → "한글로 번역" 버튼 클릭
   ```

2. **일괄 번역**
   ```
   파일 트리 로드 → "일괄 번역" 버튼 → 파일 선택 → "번역 시작"
   ```

3. **설정 변경**
   ```
   좌측 톱니바퀴 아이콘 → Provider 및 모델 선택 → API 키 입력
   ```

## 캐시 시스템

### 작동 방식
1. 파일 내용의 SHA-256 해시 생성
2. IndexedDB에 `파일경로 + 해시` 조합으로 저장
3. 파일 내용이 변경되면 자동으로 새로 번역

### 캐시 확인
- 파일 목록에서 💾 아이콘이 표시된 파일은 캐시됨
- 파일 열 때 "캐시됨" 배지 표시
- 일괄 번역 시 캐시된 파일은 자동으로 선택 해제

## 기술 스택

### Frontend
- React 18
- Vite

### 마크다운 처리
- react-markdown
- remark-gfm (GitHub Flavored Markdown)
- rehype-highlight (코드 하이라이팅)
- mermaid (다이어그램)

### 데이터 저장
- IndexedDB (번역 캐시)
- localStorage (설정 저장)

### LLM API
- OpenAI API
- Anthropic Claude API
- Google Gemini API

## 지원하는 마크다운 요소

- 제목 (H1-H6)
- 목록 (순서 있음/없음)
- 코드 블록 (신택스 하이라이팅)
- 인라인 코드
- 링크 및 이미지
- 테이블
- 인용구
- 체크리스트
- 가로선
- 텍스트 스타일 (굵게, 기울임, 취소선 등)
- Mermaid 다이어그램

## 성능 최적화

### 일괄 번역 최적화
- **롤링 동시성**: 3개 파일을 동시에 처리하되, 하나가 완료되면 즉시 다음 파일 시작
- **병렬 처리**: Promise.race()를 사용한 효율적인 비동기 처리
- **리소스 활용**: 항상 최대 동시 실행 수 유지

### 캐시 최적화
- **해시 기반**: 파일 내용 변경 시에만 재번역
- **IndexedDB**: 브라우저 영구 저장소 사용
- **자동 로드**: 캐시된 파일은 즉시 번역 상태로 표시

## UI 테마

GitHub Dark 테마를 기반으로 한 다크 모드 UI를 제공합니다.

## 라이선스

MIT
